<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Folga Cil√≠ndrica</title>

        <!-- CSS -->
        <link rel="stylesheet" href="css/header-nav.css" />
        <link rel="stylesheet" href="css/footer.css" />
        <link rel="stylesheet" href="css/calcfolgacilin.css" />
        <link rel="stylesheet" href="css/modais.css" />

        <!-- Biblioteca jsPDF para exportar PDF -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

        <!-- Firebase (apenas m√≥dulos) -->
        <script type="module" src="js/firebase-init.js"></script>
        <script type="module" src="js/auth-state.js"></script>
    </head>

    <body>
        <div id="header-nav-container"></div>

        <!-- Modal Aviso Legal -->
        <div id="avisoModal" class="modal">
            <div class="modal-content aviso-legal">
                <span class="close-modal">&times;</span>
                <h2>Aviso Legal</h2>
                <p>
                    A ENENG n√£o se responsabiliza pela precis√£o, confiabilidade
                    ou consequ√™ncias dos resultados gerados por este programa de
                    c√°lculo. Os valores obtidos s√£o fornecidos apenas para fins
                    informativos e n√£o substituem a avalia√ß√£o de um profissional
                    qualificado. Recomendamos a verifica√ß√£o independente de
                    todos os dados antes de qualquer aplica√ß√£o pr√°tica.
                </p>
            </div>
        </div>

        <!-- Conte√∫do principal -->
        <main class="container">
            <h1 class="titulo-principal">
                C√°lculo da folga em tampas para rolamentos cil√≠ndricos
            </h1>

            <form id="formCalc" class="form-grid">
                <div class="coluna coluna-dados">
                    <h2>Dados de Entrada</h2>

                    <div class="form-row">
                        <label for="cliente">Cliente</label>
                        <input type="text" id="cliente" name="cliente" />
                    </div>

                    <div class="form-row">
                        <label for="projeto">Projeto</label>
                        <input type="text" id="projeto" name="projeto" />
                    </div>

                    <div class="form-row">
                        <label for="observacao">Eixo</label>
                        <input type="text" id="observacao" name="observacao" />
                    </div>

                    <div class="form-row">
                        <label for="distancia">
                            Dist√¢ncia entre centros dos rolamentos
                            <span>
                                L
                                <sub>0</sub>
                            </span>
                            (mm)
                        </label>
                        <input
                            type="number"
                            id="distancia"
                            name="distancia"
                            required
                        />
                    </div>

                    <div class="form-row">
                        <label for="materialEixo">Material do eixo</label>
                        <select id="materialEixo" name="materialEixo">
                            <option value="aco">A√ßo</option>
                            <option value="aluminio">Alum√≠nio</option>
                            <option value="ferro">Ferro Fundido</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <label for="materialCaixa">Material da caixa</label>
                        <select id="materialCaixa" name="materialCaixa">
                            <option value="aco">A√ßo</option>
                            <option value="aluminio">Alum√≠nio</option>
                            <option value="ferro">Ferro Fundido</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <label for="tempAmbiente">
                            Temperatura ambiente (¬∞C)
                        </label>
                        <input
                            type="number"
                            id="tempAmbiente"
                            name="tempAmbiente"
                            required
                        />
                    </div>

                    <div class="form-row">
                        <label for="tempCaixa">Temperatura da caixa (¬∞C)</label>
                        <input
                            type="number"
                            id="tempCaixa"
                            name="tempCaixa"
                            required
                        />
                    </div>

                    <div class="form-row">
                        <label for="rotacao">Rota√ß√£o do eixo (rpm)</label>
                        <input
                            type="number"
                            id="rotacao"
                            name="rotacao"
                            required
                        />
                    </div>

                    <div class="form-row">
                        <label for="deltaT">
                            Diferen√ßa de temperatura entre caixa e eixo (¬∞C)
                        </label>
                        <input
                            type="text"
                            id="deltaT"
                            name="deltaT"
                            readonly
                            class="no-focus-style"
                            tabindex="-1"
                        />
                    </div>

                    <div class="botoes-entrada">
                        <button
                            type="button"
                            id="btnFormulas"
                            class="btn-aviso"
                        >
                            <i data-lucide="book-open"></i>
                            Formul√°rio
                        </button>

                        <button type="button" id="btnAviso" class="btn-aviso">
                            <i data-lucide="info"></i>
                            Aviso Legal
                        </button>

                        <button type="button" id="btnReset" class="btn-reset">
                            <i data-lucide="refresh-ccw"></i>
                            Resetar Dados
                        </button>
                    </div>
                </div>

                <div class="coluna coluna-imagem">
                    <img src="imagens/Eixo1.png" alt="Imagem de exemplo" />
                </div>

                <div class="coluna coluna-resultados">
                    <h2>Resultados</h2>
                    <div class="form-row">
                        <label>Coeficiente de dilata√ß√£o do eixo (¬∞C‚Åª¬π):</label>
                        <input type="text" id="coefEixo" readonly />
                    </div>
                    <div class="form-row">
                        <label>Coeficiente de dilata√ß√£o da caixa (¬∞C‚Åª¬π):</label>
                        <input type="text" id="coefCaixa" readonly />
                    </div>
                    <div class="form-row">
                        <label>
                            Diferen√ßa de temperatura entre caixa e ambiente
                            (¬∞C):
                        </label>
                        <input type="text" id="res2" readonly />
                    </div>
                    <div class="form-row">
                        <label>
                            Diferen√ßa de temperatura entre eixo e ambiente (¬∞C):
                        </label>
                        <input type="text" id="res3" readonly />
                    </div>
                    <div class="form-row">
                        <label>Dilata√ß√£o eixo (mm):</label>
                        <input type="text" id="res4" readonly />
                    </div>
                    <div class="form-row">
                        <label>Dilata√ß√£o caixa (mm):</label>
                        <input type="text" id="res5" readonly />
                    </div>
                    <div class="form-row">
                        <label>Diferen√ßa de dilata√ß√£o (mm):</label>
                        <input type="text" id="res6" readonly />
                    </div>
                    <div class="form-row">
                        <label>Seguran√ßa (mm):</label>
                        <input type="text" id="res9" readonly />
                    </div>
                    <div class="form-row">
                        <label>Folga necess√°ria (mm):</label>
                        <input type="text" id="res7" readonly />
                    </div>
                    <div class="form-row">
                        <label>Toler√¢ncia da folga (mm):</label>
                        <input type="text" id="res8" readonly />
                    </div>

                    <div class="botoes">
                        <button type="button" id="btnGerarPDF">
                            Gerar PDF
                        </button>
                    </div>
                </div>
            </form>

            <!-- üìò Modal: F√≥rmulas -->
            <div id="formulasModal" class="modal-overlay">
                <div class="modal-conteudo padrao">
                    <span class="fechar-modal" data-modal="formulasModal">
                        &times;
                    </span>
                    <h3>F√≥rmulas Utilizadas</h3>
                    <img
                        src="help/Formulas_CalcFolgaCilin.jpg"
                        alt="F√≥rmulas de c√°lculo"
                        style="max-width: 100%; height: auto; margin-top: 1rem"
                    />
                </div>
            </div>
        </main>

        <div id="footer-container"></div>

        <!-- Header din√¢mico -->
        <script>
            fetch('header-nav.html')
                .then((r) => r.text())
                .then((html) => {
                    document.getElementById('header-nav-container').innerHTML =
                        html;
                    if (window.lucide) {
                        lucide.createIcons({
                            stroke: '#f5a002',
                            strokeWidth: 2,
                            size: 24,
                            overwrite: true,
                        });
                    }
                    requestAnimationFrame(() => {
                        import('./js/header-nav.js');
                        import('./js/auth-sync.js');
                    });
                });
        </script>

        <!-- Footer din√¢mico e script de status com versionamento -->
        <script>
            fetch('footer.html')
                .then((res) => res.text())
                .then((html) => {
                    document.getElementById('footer-container').innerHTML =
                        html;

                    const statusScript = document.createElement('script');
                    statusScript.type = 'module';
                    statusScript.src = 'js/footer-status.js?v=2'; // for√ßa atualiza√ß√£o
                    document.body.appendChild(statusScript);
                });
        </script>

        <!-- Lucide icons -->
        <script
            src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"
            onload="lucide.createIcons({ stroke:'#f5a002', strokeWidth:2, size:24 });"
        ></script>

        <!-- Scripts locais -->
        <script type="module" src="js/calcfolgacilin.js"></script>
        <script src="js/modais.js"></script>
    </body>
</html>
